<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <title>Zaitoon Management</title>
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="apple-touch-fullscreen" content="yes">
      <meta name="description" content="Avenxo Admin Theme">
      <meta name="author" content="KaijuThemes">
      <link type='text/css' href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400italic,600' rel='stylesheet'>
      <link type="text/css" href="assets/fonts/font-awesome/css/font-awesome.min.css" rel="stylesheet">
      <!-- Font Awesome -->
      <link type="text/css" href="assets/fonts/themify-icons/themify-icons.css" rel="stylesheet">
      <!-- Themify Icons -->
      <link type="text/css" href="assets/css/styles.css" rel="stylesheet">
      <!-- Core CSS with all styles -->
      <link type="text/css" href="assets/plugins/codeprettifier/prettify.css" rel="stylesheet">
      <!-- Code Prettifier -->
      <link type="text/css" href="assets/plugins/iCheck/skins/minimal/blue.css" rel="stylesheet">
      <!-- iCheck -->
      <!--[if lt IE 10]>
      <script type="text/javascript" src="assets/js/media.match.min.js"></script>
      <script type="text/javascript" src="assets/js/respond.min.js"></script>
      <script type="text/javascript" src="assets/js/placeholder.min.js"></script>
      <![endif]-->
      <!-- The following CSS are included as plugins and can be removed if unused-->
      <link type="text/css" href="assets/plugins/fullcalendar/fullcalendar.css" rel="stylesheet">
      <!-- FullCalendar -->
      <link type="text/css" href="assets/plugins/jvectormap/jquery-jvectormap-2.0.2.css" rel="stylesheet">
      <!-- jVectorMap -->
      <link type="text/css" href="assets/plugins/switchery/switchery.css" rel="stylesheet">
      <!-- Switchery -->
      <!-- Controller -->
      <script src="assets/js/jquery.js"></script>
      <script src="assets/js/angular.min.js"></script>
      <script src="controllers/orders.js"></script>
   </head>
   <body class="animated-content" ng-app="OrdersApp" ng-controller="ordersController" ng-cloak>
      <header id="topnav" class="navbar navbar-default navbar-fixed-top" role="banner">
         <div class="logo-area">
            <span id="trigger-sidebar" class="toolbar-trigger toolbar-icon-bg">
            <a data-toggle="tooltips" data-placement="right" title="Toggle Sidebar">
            <span class="icon-bg">
            <i class="ti ti-menu"></i>
            </span>
            </a>
            </span>
            <a class="navbar-brand" href="index.html"></a>
         </div>
         <!-- logo-area -->
         <ul class="nav navbar-nav toolbar pull-right">
            <li class="toolbar-icon-bg hidden-xs" id="trigger-fullscreen">
               <a href="#" class="toggle-fullscreen"><span class="icon-bg"><i class="ti ti-zoom-in"></i></span></i></a>
            </li>            
            <li class="dropdown toolbar-icon-bg">
               <a href="#" class="dropdown-toggle username" data-toggle="dropdown">
               <img class="img-circle" src="assets/img/default_user.png" alt="" />
               </a>
               <ul class="dropdown-menu userinfo arrow">
                  <li><a href="#/"><i class="ti ti-settings"></i><span>Settings</span></a></li>
                  <li><a href="#/"><i class="ti ti-shift-right"></i><span>Sign Out</span></a></li>
               </ul>
            </li>
         </ul>
      </header>
      <div id="wrapper">
         <div id="layout-static">
            <div class="static-sidebar-wrapper sidebar-default">
               <div class="static-sidebar">
                  <div class="sidebar">
                     <div class="widget stay-on-collapse" id="widget-sidebar">
                        <nav role="navigation" class="widget-body">
                           <ul class="acc-menu">
                              <li><a href="index.html"><i class="ti ti-layout"></i><span>Order Dashboard</span><span class="badge badge-teal" ng-if="pending_orders.length > 0">{{pending_orders.length}}</span></a></li>
                              <li><a href="completed-orders.html"><i class="ti ti-check-box"></i><span>Completed Orders</span></a></li>
                              <li>
                                 <a href="javascript:;"><i class="ti ti-menu"></i><span>Actions</span></a>
                                 <ul class="acc-menu">
                                    <li><a href="#">Add an Offer</a></li>
                                    <li><a href="#">Ads Manager</a></li>
                                    <li><a href="coupons.html">Coupons Manager</a></li>
                                    <li><a href="edit-menu.html">Edit Menu</a></li>
                                    <li><a href="promo-sms.html">Promotional SMS</a></li>
                                    <li><a href="user-profile.html">Search User</a></li>
                                    <li><a href="user-privileges.html">Set User Privileges</a></li>
                                 </ul>
                              </li>
                              <li>
                                 <a href="javascript:;"><i class="ti ti-stats-up"></i><span>Reports</span></a>
                                 <ul class="acc-menu">
                                    <li><a href="#">Analytics</a></li>
                                    <li><a href="#">Finance Ledger</a></li>
                                    <li><a href="#">Order Statistics</a></li>
                                 </ul>
                              </li>
                              <li><a href="feedback.html"><i class="ti ti-thumb-up"></i><span>Feedbacks</span><span class="badge badge-teal">1</span></a></li>
                              <li>
                                 <a href="javascript:;"><i class="ti ti-user"></i><span>Resource Management</span></a>
                                 <ul class="acc-menu">
                                    <li><a href="resources-admin.html">Admins</a></li>
                                    <li><a href="resources-deliveryboy.html">Delivery Agents</a></li>
                                    <li><a href="resources-outlet.html">Outlets</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </nav>
                     </div>
                  </div>
               </div>
            </div>
            <div class="static-content-wrapper">
               <div class="static-content">
                  <div class="page-content">
                    <ol class="breadcrumb">
                     </ol>
                     <div class="container-fluid">
                        <div class="row">
                           <div ng-click="showPending()">
                              <div class="col-md-4">
                                 <div class="info-tile tile-orange" id="pendingTabButton">
                                    <div class="tile-icon"><i class="ti ti-shopping-cart-full"></i></div>
                                    <div class="tile-heading"><span>Pending Orders</span></div>
                                    <div class="tile-body"><span>{{pending_orders.length}}</span></div>
                                    <div class="tile-footer"><span class="text-default">To be Billed</span></div>
                                 </div>
                              </div>
                           </div>
                           <div ng-click="showConfirmed()">
                              <div class="col-md-4">
                                 <div class="info-tile tile-orange" id="confirmedTabButton">
                                    <div class="tile-icon"><i class="ti ti-loop"></i></div>
                                    <div class="tile-heading"><span>Confirmed Orders</span></div>
                                    <div class="tile-body"><span>{{confirmed_orders.length}}</span></div>
                                    <div class="tile-footer"><span class="text-default">To be Delivered</span></div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div data-widget-group="group1">
                           <div class="row">
                              <div class="col-md-4" id="pendingTab">
                                 <div class="panel panel-teal" data-widget='{"draggable": "false"}'>
                                    <div class="panel-heading">
                                       <h2>Pending Orders</h2>
                                       <div class="panel-ctrls button-icon-bg" 
                                          data-actions-container="" 
                                          data-action-refresh-demo='{"type": "circular"}'
                                          >
                                       </div>
                                    </div>
                                    <div class="panel-body no-padding" style="height: 100%">
                                       <table class="table m-n table-hover" ng-init="initializePendingOrders()">
                                          <tbody>
                                          <p ng-if="!pending_orders.length" style="padding: 20px; text-align: center">There are no pending orders.</p>
                                             <tr ng-repeat="order in pending_orders" ng-click="showOrder(order.orderID)">
                                                <td>#{{$index + 1}}</td>
                                                <td>{{order.orderID}}</td>
                                                <td>{{order.userID}} ({{order.name}})</td>
                                                <td>10m ago.</td>
                                             </tr>                                            
                                          </tbody>
                                       </table>
                                    </div>
                                 </div>
                              </div>
                              <div class="col-md-4" id="confirmedTab">
                                 <div class="panel panel-teal" data-widget='{"draggable": "false"}'>
                                    <div class="panel-heading">
                                       <h2>Confirmed Orders</h2>                                       
                                       <div class="panel-ctrls button-icon-bg" 
                                          data-actions-container="" 
                                          data-action-refresh-demo='{"type": "circular"}'
                                          >
                                       </div>
                                    </div>
                                    <div class="panel-body no-padding" style="height: 100%">
                                       <table class="table m-n table-hover" ng-init="initializePendingOrders()">
                                          <tbody>
											<p ng-if="!confirmed_orders.length" style="padding: 20px; text-align: center">There are no confirmed orders.</p>
                                             <tr ng-repeat="order in confirmed_orders" ng-click="showOrder(order.orderID)">
                                                <td>#{{$index + 1}}</td>
                                                <td>{{order.orderID}}</td>
                                                <td>{{order.userID}} ({{order.name}})</td>
                                                <td>10m ago.</td>
                                             </tr>                                            
                                          </tbody>
                                       </table>
                                    </div>
                                 </div>
                              </div>
                             
                              <div class="col-md-8">
                                 <div class="panel panel-bluegray">
                                    <div class="panel-heading">
                                       <h2 ng-if="displayOrderID">Order   <tag style="color: #f1c40f; font-size: 21px;">#{{displayOrderID}}</h2>
                                    </div>
                                    <div class="panel-body" ng-if="displayOrderID">
                                       <div id="earnings" class="mt-sm mb-sm">
                                          <!-- Order Data -->					
                                          <div class="table-responsive">
                                             <table class="table">
                                                <thead>
                                                   <tr>
                                                      <th>#</th>
                                                      <th>Item Name</th>
                                                      <th>Quantity</th>
                                                      <th>Unit Price</th>
                                                      <th>Sub Total</th>
                                                   </tr>
                                                </thead>
                                                <tbody>
                                                   <tr ng-repeat="item in displayOrderContent.cart.items">
                                                      <td align="left">{{$index+1}}</td>
                                                      <td>{{item.itemName}} <span class="text-warning" style="font-size: 11px;">{{item.itemVariety}}</span></td>
                                                      <td>{{item.itemQuantity}}</td>
                                                      <td>{{item.itemPrice}}</td>
                                                      <td>{{item.itemPrice*item.itemQuantity}}</td>
                                                   </tr>
                                                </tbody>
                                             </table>
                                          </div>
                                       </div>
                                       <div class="row">
                                          <a href="#">
                                             <div class="col-md-6">
                                                <div class="alert alert-info">
                                                   <h3>Delivery Details</h3>
                                                   <p>{{displayOrderContent.name}}<br>
                                                   {{displayOrderContent.address.line1}}<br>
                                                   {{displayOrderContent.address.line2}}<br>
                                                   {{displayOrderContent.address.area}}<br>
                                                   {{displayOrderContent.address.city}}<br>
                                                   Mob. <strong>{{displayOrderContent.address.contact}}</strong></p>
                                                </div>
                                             </div>
                                          </a>

                                          <!-- PENDING ORDER CASE -->

                                          <div class="col-md-3" ng-if="isPendingDisplayed">
                                             <div class="btn btn-danger-alt btn-label" ng-click="rejectOrder(displayOrderID)"><i class="ti ti-close" ></i> Reject</div>
                                          </div>
                                          <div class="col-md-3" ng-if="isPendingDisplayed">
                                             <div class="btn btn-success-alt btn-label" ng-click="confirmOrder(displayOrderID)"><i class="ti ti-check"></i> Confirm</div>
                                          </div>



                                          <!-- CONFIRMED ORDER CASE -->                                          
                                          <div class="col-md-3" ng-if="!isPendingDisplayed && !showDeliveryAgents">
                                             <div class="btn btn-danger-alt btn-label" ng-click="rejectOrder(displayOrderID)"><i class="ti ti-close" ></i> Cancel</div>
                                          </div>
                                          <div class="col-md-3" ng-if="!isPendingDisplayed && !showDeliveryAgents">
                                             <div class="btn btn-success-alt btn-label" ng-click="assignAgent()"><i class="ti ti-check"></i> Dispatch</div>
                                          </div>

                                          <div class="col-md-6" ng-if="!isPendingDisplayed && showDeliveryAgents">
                                             <div class="form-group">
                                                <label for="selector1" class="col-sm-12 control-label">Choose Delivery Agent</label>
                                                <div class="col-sm-12">
                                                   <select name="selector1" id="selector1" class="form-control"
                                                      ng-model="agentsList"
                                                      ng-options="agent.label for agent in delivery_agents">
                                                   </select>
                                                </div>
                                             </div>
                                             <br><br>                                         
                                             <div ng-if="agentsList.label" class="btn btn-success-alt btn-label pull-right" style="margin-right: 20px;" ng-click="dispatchOrder(displayOrderID, agentsList.value)"><i class="ti ti-check"></i> Assign</div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <!-- .container-fluid -->
                  </div>
                  <!-- #page-content -->
               </div>
            </div>
         </div>
      </div>
      <!-- Load site level scripts -->
      <!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
         <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> -->
      <script type="text/javascript" src="assets/js/jquery-1.10.2.min.js"></script> 							<!-- Load jQuery -->
      <script type="text/javascript" src="assets/js/jqueryui-1.10.3.min.js"></script> 							<!-- Load jQueryUI -->
      <script type="text/javascript" src="assets/js/bootstrap.min.js"></script> 								<!-- Load Bootstrap -->
      <script type="text/javascript" src="assets/js/enquire.min.js"></script> 									<!-- Load Enquire -->
      <script type="text/javascript" src="assets/plugins/velocityjs/velocity.min.js"></script>					<!-- Load Velocity for Animated Content -->
      <script type="text/javascript" src="assets/plugins/velocityjs/velocity.ui.min.js"></script>
      <script type="text/javascript" src="assets/plugins/wijets/wijets.js"></script>     						<!-- Wijet -->
      <script type="text/javascript" src="assets/plugins/codeprettifier/prettify.js"></script> 				<!-- Code Prettifier  -->
      <script type="text/javascript" src="assets/plugins/bootstrap-switch/bootstrap-switch.js"></script> 		<!-- Swith/Toggle Button -->
      <script type="text/javascript" src="assets/plugins/bootstrap-tabdrop/js/bootstrap-tabdrop.js"></script>  <!-- Bootstrap Tabdrop -->
      <script type="text/javascript" src="assets/plugins/iCheck/icheck.min.js"></script>     					<!-- iCheck -->
      <script type="text/javascript" src="assets/plugins/nanoScroller/js/jquery.nanoscroller.min.js"></script> <!-- nano scroller -->
      <script type="text/javascript" src="assets/js/application.js"></script>
      <script type="text/javascript" src="assets/demo/demo.js"></script>
      <script type="text/javascript" src="assets/demo/demo-switcher.js"></script>
      <!-- End loading site level scripts -->
      <!-- Load page level scripts-->
      <!-- Charts -->
      <script type="text/javascript" src="assets/plugins/charts-flot/jquery.flot.min.js"></script>             	<!-- Flot Main File -->
      <script type="text/javascript" src="assets/plugins/charts-flot/jquery.flot.pie.min.js"></script>             <!-- Flot Pie Chart Plugin -->
      <script type="text/javascript" src="assets/plugins/charts-flot/jquery.flot.stack.min.js"></script>       	<!-- Flot Stacked Charts Plugin -->
      <script type="text/javascript" src="assets/plugins/charts-flot/jquery.flot.orderBars.min.js"></script>   	<!-- Flot Ordered Bars Plugin-->
      <script type="text/javascript" src="assets/plugins/charts-flot/jquery.flot.resize.min.js"></script>          <!-- Flot Responsive -->
      <script type="text/javascript" src="assets/plugins/charts-flot/jquery.flot.tooltip.min.js"></script> 		<!-- Flot Tooltips -->
      <script type="text/javascript" src="assets/plugins/charts-flot/jquery.flot.spline.js"></script> 				<!-- Flot Curved Lines -->
      <script type="text/javascript" src="assets/plugins/sparklines/jquery.sparklines.min.js"></script> 			 <!-- Sparkline -->
      <script type="text/javascript" src="assets/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js"></script>       <!-- jVectorMap -->
      <script type="text/javascript" src="assets/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>   <!-- jVectorMap -->
      <script type="text/javascript" src="assets/plugins/switchery/switchery.js"></script>     					<!-- Switchery -->
      <script type="text/javascript" src="assets/plugins/easypiechart/jquery.easypiechart.js"></script>
      <script type="text/javascript" src="assets/plugins/fullcalendar/moment.min.js"></script> 		 			<!-- Moment.js Dependency -->
      <script type="text/javascript" src="assets/plugins/fullcalendar/fullcalendar.min.js"></script>   			<!-- Calendar Plugin -->
      <script type="text/javascript" src="assets/demo/demo-index.js"></script> 									<!-- Initialize scripts for this page-->
      <!-- End loading page level scripts-->
   </body>
</html>